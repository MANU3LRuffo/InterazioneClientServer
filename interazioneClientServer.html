<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Interazione con il client e il server</title>
  <style>
    h1{
      color: dodgerblue;
    }
    body{
      background-color: black;
    }
    textarea {
      width: 300px;
      height: 200px;
      margin-bottom: 10px;
    }
    input {
      width: 300px;
      margin-bottom: 10px;
      display: block;
      overflow: hidden;
    }
    p{
      color: dodgerblue;
      font-size: 25px;
      font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
    }
    button{
      background-color: dodgerblue;
      color: black;
      font-size: 22px;
    }
  </style>
  <script>
    "use strict";
    function gestoreRicezione(messaggioRicevuto){
    document.getElementById("messaggio").textContent += messaggioRicevuto.data + "\n";
    ws.onmessage=gestoreRicezione;
    console.log(messaggioRicevuto.data);
    if(messaggioRicevuto.data == "R|ok"){
      invioMessaggio();
    }
    if(messaggioRicevuto.data == "R|no"){
      chiudiLaConnessione();
    }
    }

    let ws = new WebSocket("ws://10.1.0.52:8090/chat25/5i2");

    function invioAccesso(){
    let nomeUtenteDaInserire = document.getElementById("nomeUtente");
    let passwordDaInserire = document.getElementById("password");
    let messaggioDaInviare = "A" + "|" +
    document.getElementById("nomeUtente").value + "|" +document.getElementById("password").value;
    ws.send(messaggioDaInviare);
    document.getElementById("ricezione").style.display="block";
    document.getElementById("nomeUtente&password").style.display="none";
    document.getElementById("messaggioDaInviare").style.display="block";
    }
    function chiudiLaConnessione(){
    ws.close();
    }
    function invioMessaggio(){

    }
</script>
</head>
<body>
  <h1>Dialogo server-client</h1>
  <div id="nomeUtente&password">
    <p>nome utente</p> <input id="nomeUtente" type="text">
    <p>password</p> <input id="password" type="text">
  </div>
  <p id="messaggioDaInviare" style="display: none;">messaggioDaInviare</p>
  <textarea id="ricezione" style="display: none;"></textarea><br>
  <button onClick="invioAccesso()" id="invioAccesso">accedi</button>
  <button onClick="invioMessaggio()" >invia messaggio</button>
</body>
</html>